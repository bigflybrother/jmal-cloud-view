(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-093980f4"],{"021e":function(e,t,i){"use strict";var n=i("b775");t["a"]={getMarkdown:function(e){return Object(n["a"])({url:"/markdown/p",method:"get",params:e})},editMarkdown:function(e){return Object(n["a"])({url:"/markdown/edit",method:"post",data:e})},sortMarkdown:function(e){return Object(n["a"])({url:"/markdown/sort",method:"post",data:e})},deleteDraft:function(e){return Object(n["a"])({url:"/markdown/deleteDraft",method:"delete",params:e})},editMarkdownByPath:function(e){return Object(n["a"])({url:"/markdown/edit1",method:"post",data:e})},uploadLinkImage:function(e){return Object(n["a"])({url:"/upload-markdown-link-image",method:"post",data:e})},uploadImage:function(e){return Object(n["a"])({url:"/upload-markdown-image",method:"post",data:e})}}},1:function(e,t){},1e3:function(e,t,i){"use strict";i.d(t,"c",(function(){return s})),i.d(t,"b",(function(){return a})),i.d(t,"a",(function(){return l}));i("5df3"),i("f400"),i("ac6a");var n=i("33f9"),s={simText:["vue","asp","jsp","TXT","xml","xsl","iml","m","bas","prg","cmd","sass","sas","php","lst","key","pem","log","cmake","db","gradle","bat","","conf","dart","plist"],compressedFile:["zip","tar","jar","tar.gz","tgz","tar.bz2"]};n["languages"].getLanguages().forEach((function(e){e.extensions.forEach((function(e){s.simText.push(e.substring(1,e.length))}))}));var a=["txt"],l=new Map;l.set("php","file-php"),l.set("js","file-js"),l.set("vue","file-vue"),l.set("xml","file-xml"),l.set("dart","file-dart"),l.set("html","file-html"),l.set("md","file-md"),l.set("txt","file-txt"),l.set("TXT","file-txt"),l.set("css","file-css"),l.set("scss","file-css"),l.set("java","file-java"),l.set("go","file-go"),l.set("DS_Store","file-Ds-store"),l.set("jar","file-jar"),l.set("properties","file-properties"),l.set("conf","file-conf"),l.set("factories","file-factories"),l.set("class","file-class"),l.set("excel","file-excel"),l.set("xls","file-excel"),l.set("xlsx","file-excel"),l.set("gitignore","file-gitignore"),l.set("ncm","file-ncm"),l.set("dmg","file-dmg"),l.set("pkg","file-pkg"),l.set("mpkg","file-pkg"),l.set("exe","file-exe"),l.set("word","file-word"),l.set("pdf","file-pdf"),l.set("zip","zip"),l.set("rar","zip"),l.set("iml","file-idea"),l.set("key","file-key"),l.set("pem","file-pem"),l.set("gz","file-gzip"),l.set("json","file-json"),l.set("tar","file-tar"),l.set("sh","file-shell"),l.set("log","file-log"),l.set("py","file-python"),l.set("cpp","file-cpp"),l.set("h","file-h"),l.set("xsl","file-xsl"),l.set("cmake","file-cmake"),l.set("db","file-db"),l.set("sql","file-db"),l.set("gradle","file-gradle"),l.set("bat","file-bat"),l.set("swift","file-swift"),l.set("yml","file-yml"),l.set("plist","file-plist"),l.set("iso","iso")},"488d":function(e,t,i){"use strict";i.r(t);var n=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{directives:[{name:"resize",rawName:"v-resize",value:e.containerResize,expression:"containerResize"}],staticClass:"dashboard-container"},[i("transition",{attrs:{name:"fade"}},[e.isLoading?i("al-loading"):e._e()],1),e._v(" "),i("div",{staticClass:"share-h"},[i("div",{staticClass:"share-header"},[i("div",{staticClass:"share-header-content logo"},[i("svg-icon",{attrs:{"icon-class":"jmal-cloud"}}),e._v(" "),i("span",[e._v("jmalcloud")])],1),e._v(" "),i("div",{staticClass:"share-header-content sharer"},[i("span",[i("span",{staticClass:"user"},[e._v(e._s(e.sharer.showName))]),e._v("的分享")]),e._v(" "),i("el-avatar",{attrs:{src:e.sharer.avatar}})],1)]),e._v(" "),i("el-divider",{staticClass:"header-location"}),e._v(" "),e.linkFailed?e._e():i("el-breadcrumb",{staticClass:"app-breadcrumb",attrs:{separator:""}},[i("transition-group",{attrs:{name:"breadcrumb"}},e._l(e.pathList,(function(t,n){return i("el-breadcrumb-item",{key:t.index},[0===n?i("span",[e._v("当前位置:")]):e._e(),e._v(" "),i("breadcrumb-file-path",{attrs:{pathList:e.pathList,item:t,index:n},on:{clickLink:e.handleLink}})],1)})),1),e._v(" "),i("div",{staticClass:"search-content"},[i("div",{staticClass:"search-class"},[e.indexList.length>0?i("el-button",{staticClass:"sort",attrs:{type:"text",title:"下载"},on:{click:function(t){return e.downloadFile(!1)}}},[i("svg-icon",{attrs:{"icon-class":"menu-download"}})],1):e._e(),e._v(" "),i("el-button",{staticClass:"vmode",attrs:{type:"text"},on:{click:e.changeVmode}},[i("svg-icon",{attrs:{"icon-class":e.grid?"list":"grid"}})],1)],1)])],1)],1),e._v(" "),i("e-vue-contextmenu",{ref:"contextShow",staticClass:"newFileMenu",class:e.menuTriangle,on:{"ctx-show":e.show,"ctx-hide":e.hide}},[i("div",{staticClass:"popper-arrow"}),e._v(" "),e._l(e.menus,(function(t){return i("ul",{key:t.label},[i("li",{staticClass:"menu-option",on:{click:function(i){return e.menusOperations(t.operation)}}},[i("label",{staticClass:"menuitem"},[i("svg-icon",{attrs:{"icon-class":t.iconClass}}),i("span",{staticClass:"menuitem text"},[e._v(e._s(t.label))])],1)])])}))],2),e._v(" "),i("el-table",{directives:[{name:"show",rawName:"v-show",value:!e.grid&&!e.linkFailed,expression:"!grid && !linkFailed"},{name:"loading",rawName:"v-loading",value:e.tableLoading,expression:"tableLoading"}],ref:"fileListTable",staticStyle:{width:"100%",margin:"20px 0 0 0"},attrs:{"empty-text":"无文件",data:e.fileList,"row-key":"id","summary-method":e.getSummaries,"show-summary":"","cell-style":e.rowRed,"row-class-name":e.tableRowClassName,"element-loading-text":"文件加载中","element-loading-spinner":"el-icon-loading","element-loading-background":"#f6f7fa88"},on:{"selection-change":e.handleSelectionChange,"row-contextmenu":e.rowContextmenu,"cell-click":e.cellClick,"cell-mouse-enter":e.cellMouseEnter,"cell-mouse-leave":e.cellMouseLeave}},[e._l(e.tableHead,(function(t,n){return[0===n?i("el-table-column",{key:n,attrs:{index:n,type:"selection","min-width":"50"}}):e._e(),e._v(" "),1===n?i("el-table-column",{key:n,attrs:{index:n,width:"50"},scopedSlots:e._u([{key:"default",fn:function(t){return[i("icon-file",{attrs:{item:t.row,"image-url":e.imageUrl,public:!0}})]}}],null,!0)}):e._e(),e._v(" "),2===n?i("el-table-column",{key:n,attrs:{"show-overflow-tooltip":!0,"max-width":"200",index:n,prop:t.name,label:t.label,sortable:t.sortable},on:{click:function(t){return t.stopPropagation(),e.fileClick(e.scope.row)}},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.index===e.editingIndex?i("el-col",{attrs:{span:10}},[i("el-input",{directives:[{name:"focus",rawName:"v-focus"}],attrs:{placeholder:"",size:"small",clearable:!0},nativeOn:{keyup:function(i){return!i.type.indexOf("key")&&e._k(i.keyCode,"enter",13,i.key,"Enter")?null:e.rowRename(e.renameFileName,t.row)}},model:{value:e.renameFileName,callback:function(t){e.renameFileName=t},expression:"renameFileName"}}),e._v(" "),i("el-button",{directives:[{name:"loading",rawName:"v-loading",value:e.renameLoading,expression:"renameLoading"}],staticClass:"el-icon-check",attrs:{"element-loading-spinner":"el-icon-loading","element-loading-background":"#f6f7fa88"},on:{click:function(i){return e.rowRename(e.renameFileName,t.row)}}}),e._v(" "),i("el-button",{staticClass:"el-icon-close",attrs:{"element-loading-spinner":"el-icon-loading","element-loading-background":"#f6f7fa88"},on:{click:function(t){e.editingIndex=-1}}})],1):i("span",{staticClass:"table-file-name"},[e._v(e._s(t.row.name))])]}}],null,!0)}):e._e(),e._v(" "),3===n&&e.showUpdateDateItem?i("el-table-column",{key:n,attrs:{width:"50",index:n,align:"center","header-align":"center"}}):e._e(),e._v(" "),4===n&&e.showUpdateDateItem?i("el-table-column",{key:n,staticClass:"el-icon-more",attrs:{width:"50",prop:t.name,label:t.label,index:n,align:"center","header-align":"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.index===e.cellMouseIndex?i("svg-icon",{staticClass:"button-class",attrs:{"icon-class":"more"},on:{click:function(i){return e.moreClick(t.row,i)}}}):e._e()]}}],null,!0)},[i("template",{slot:"header"},[""!==t.name?i("svg-icon",{staticClass:"button-class",attrs:{"icon-class":"more"},on:{click:function(t){return e.moreOperation(t)}}}):e._e()],1)],2):e._e(),e._v(" "),5===n&&e.showSizeItem?i("el-table-column",{key:n,attrs:{width:"200",prop:t.name,index:n,label:t.label,sortable:t.sortable,"show-overflow-tooltip":!0,align:"left","header-align":"left"},scopedSlots:e._u([{key:"default",fn:function(t){return[i("span",[e._v(e._s(e.formatSize(t.row.size)))])]}}],null,!0)}):e._e(),e._v(" "),6===n&&e.showUpdateDateItem?i("el-table-column",{key:n,attrs:{width:"300",prop:t.name,index:n,label:t.label,sortable:t.sortable,"show-overflow-tooltip":!0,align:"left","header-align":"left"},scopedSlots:e._u([{key:"default",fn:function(t){return[i("span",[e._v(e._s(t.row.updateDate))])]}}],null,!0)}):e._e()]}))],2),e._v(" "),i("div",{directives:[{name:"show",rawName:"v-show",value:e.grid&&!e.linkFailed,expression:"grid && !linkFailed"},{name:"loading",rawName:"v-loading",value:e.tableLoading,expression:"tableLoading"}],attrs:{"element-loading-text":"文件加载中","element-loading-spinner":"el-icon-loading","element-loading-background":"#f6f7fa88"}},[i("div",{staticClass:"checkbox-group-header"},[i("van-checkbox",{staticClass:"grid-all-checkbox",on:{click:function(t){return e.clickGridAllCheckBox()}},model:{value:e.allChecked,callback:function(t){e.allChecked=t},expression:"allChecked"}},[e._v(e._s(e.indexList.length>0?"已选择 "+this.tableHead[2].label:"选择"))]),e._v(" "),i("el-divider")],1),e._v(" "),i("van-checkbox-group",{ref:"checkboxGroup",on:{change:e.handleSelectionChange},model:{value:e.selectRowData,callback:function(t){e.selectRowData=t},expression:"selectRowData"}},[i("van-grid",{attrs:{square:"","column-num":e.gridColumnNum,gutter:10,border:!1}},e._l(e.fileList,(function(t,n){return i("van-grid-item",{key:t.id,ref:"gridItem",refInFor:!0},[i("div",{staticClass:"grid-time van-grid-item__content van-grid-item__content--center van-grid-item__content--square",style:{background:e.indexList.includes(n)?"#baebff91":"",cursor:e.indexList.length>0?"default":"pointer"},on:{mouseover:function(i){return e.gridItemHover(t,n)},mouseout:function(i){return e.gridItemOut(t,n)},click:function(i){return e.gridItemClick(t,i)},contextmenu:function(i){return i.preventDefault(),e.rowContextmenu(t)}}},[i("van-checkbox",{directives:[{name:"show",rawName:"v-show",value:e.gridHoverItemIndex===n||e.indexList.includes(n),expression:"gridHoverItemIndex === index || indexList.includes(index)"}],staticClass:"grid-item-checkbox",attrs:{name:t},on:{click:function(i){return i.stopPropagation(),e.clickGridItemCheckBox(t,n)}}}),e._v(" "),i("div",{staticClass:"grid-item-icon"},[i("icon-file",{attrs:{item:t,"image-url":e.imageUrl,grid:!0,"grid-width":e.gridColumnWidth,public:!0}})],1),e._v(" "),i("span",{staticClass:"grid-item-text"},[e._v(e._s(t.name))])],1)])})),1)],1)],1),e._v(" "),e.linkFailed?i("div",{staticClass:"share-header"},[""!==e.prompt?i("p",[e._v("温馨提示：")]):e._e(),e._v(" "),i("p",[e._v(e._s(e.prompt))])]):e._e(),e._v(" "),i("sim-text-preview",{attrs:{file:e.textPreviewRow,shareId:e.shareId,status:e.textPreviewVisible},on:{"update:file":function(t){e.textPreviewRow=t},"update:status":function(t){e.textPreviewVisible=t}}}),e._v(" "),i("image-viewer",{attrs:{fileList:e.fileList,shareId:e.shareId,file:e.imagePreviewRow,status:e.imagePreviewVisible},on:{"update:status":function(t){e.imagePreviewVisible=t}}}),e._v(" "),i("video-preview",{attrs:{file:e.videoPreviewRow,shareId:e.shareId,status:e.videoPreviewVisible},on:{"update:status":function(t){e.videoPreviewVisible=t}}}),e._v(" "),i("el-divider",{staticClass:"grid-divider",attrs:{"content-position":"center"}},[i("i",{staticClass:"el-icon-folder-opened"}),e._v(" "+e._s(e.summaries))]),e._v(" "),i("el-pagination",{attrs:{background:"",layout:"prev, pager, next","hide-on-single-page":!0,"current-page":e.pagination.pageIndex,"page-sizes":e.pagination.pageSizes,"page-size":e.pagination.pageSize,total:e.pagination.total},on:{"update:currentPage":function(t){return e.$set(e.pagination,"pageIndex",t)},"update:current-page":function(t){return e.$set(e.pagination,"pageIndex",t)},"current-change":e.currentChange}})],1)},s=[],a=(i("f559"),i("7f7f"),i("2d63")),l=(i("ac6a"),i("28a5"),i("20d6"),i("6762"),i("2fdb"),i("db72")),o=i("2f62"),r=i("7f29"),d=i("9dce"),c=i("5cfc"),u=i("573f"),g=i("0dcf"),h=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"loading"})},f=[],m={name:"AlLoading"},v=m,p=(i("cbbd"),i("2877")),b=Object(p["a"])(v,h,f,!1,null,"913373be",null),w=b.exports,x=i("1000"),k=i("2d53"),L=i("1638"),I=i("ae1f"),C=i("140f"),_=i("2690"),y=i("b311"),S=i.n(y),D={components:{IconFile:g["a"],BreadcrumbFilePath:u["a"],AlLoading:w,AudioPreview:C["a"],VideoPreview:I["a"],ImageViewer:L["a"],SimTextPreview:k["a"]},data:function(){return{prompt:"文件分享已被撤销",isLoading:!0,imageUrl:"/api/public/s/view/thumbnail?id=",fileMenuActive:"",path:this.$route.query.path,showNewFolder:!1,isShowNewFolder:!1,listModeSearch:!1,newFolderName:"新建文件夹",renameFileName:"",searchFileName:"",pathList:[],fileList:[],pagination:{fileId:!1,pageIndex:1,pageSize:256,total:0,pageSizes:[10,20,30,40,50]},indexList:[],clientHeight:500,tableHead:[{name:"",label:"",index:0},{name:"",label:"",index:1},{name:"name",label:"名称",sortable:!0,index:2},{name:"",label:"",index:3},{name:"",label:"",more:!0,index:4},{name:"size",label:"大小",sortable:!0,index:5},{name:"updateDate",label:"修改日期",sortable:!0,index:6}],isJustHideMenus:!1,menusIsMultiple:!1,menus:[],singleMenus:[{iconClass:"menu-open",label:"打开",operation:"open"},{iconClass:"menu-download",label:"下载",operation:"download"},{iconClass:"menu-fuzhi",label:"复制下载连接",operation:"copyDownloadUrl"}],singleMenusEdit:[{iconClass:"menu-open",label:"打开",operation:"open"},{iconClass:"menu-download",label:"下载",operation:"download"},{iconClass:"menu-fuzhi",label:"复制下载连接",operation:"copyDownloadUrl"}],multipleMenus:[{iconClass:"menu-download",label:"下载",operation:"download"}],multipleRightMenus:[{iconClass:"menu-download",label:"下载",operation:"download"}],rowContextData:{},selectRowData:[],tableLoading:!1,newFolderLoading:!1,renameLoading:!1,menuTriangle:"",cellMouseIndex:-1,editingIndex:-1,dialogMoveOrCopyVisible:!1,directoryTreeData:[],selectTreeNode:{},directoryTreeProps:{label:"name",children:"children",isLeaf:"isLeaf"},dragLoop:null,positionX:0,positionY:0,grid:!1,vmode:"list",gridColumnNum:-1,gridColumnWidth:120,gridHoverItemIndex:-1,gridHoverIntermediate:-1,allChecked:!1,summaries:"",shareDialog:!1,shareLink:"",shareFileName:"",generateShareLinkLoading:!0,shareId:this.$route.query.s,currentDirName:"",linkFailed:!0,textPreviewVisible:!1,textPreviewRow:{},imagePreviewRow:{},imagePreviewVisible:!1,videoPreviewRow:{},videoPreviewVisible:!1,audioPreviewRow:{},audioPreviewVisible:!1,showUpdateDateItem:this.$pc,showSizeItem:this.$pc,sharer:{}}},computed:Object(l["a"])({},Object(o["b"])(["name"])),created:function(){this.getFileList()},mounted:function(){var e=this;d["a"].$on("fileSuccess",(function(){e.getFileList()})),d["a"].$on("clickMore",(function(t){e.selectRowData=t,e.preliminaryRowData()})),window.history&&window.history.pushState&&(history.pushState(null,null,document.URL),window.addEventListener("popstate",this.goBack,!1));var t=this;window.onresize=function(){t.loadClientHeight()},this.$route.query.vmode&&(this.vmode=this.$route.query.vmode,"list"===this.vmode?this.grid=!1:this.grid=!0)},destroyed:function(){window.removeEventListener("popstate",this.goBack,!1)},directives:{focus:{inserted:function(e){e.querySelector("input").focus()}},resize:{bind:function(e,t){var i="",n="";function s(){var s=document.defaultView.getComputedStyle(e);i===s.width&&n===s.height||t.value(),i=s.width,n=s.height}e.__vueSetInterval__=setInterval(s,300)},unbind:function(e){clearInterval(e.__vueSetInterval__)}}},methods:{loadClientHeight:function(){this.clientHeight=document.documentElement.clientHeight-200},gridItemHover:function(e,t){this.gridHoverItemIndex=t,this.gridHoverIntermediate=t},gridItemOut:function(e,t){this.gridHoverIntermediate=-1;var i=this;setTimeout((function(){i.gridHoverIntermediate!==i.gridHoverItemIndex&&(i.gridHoverItemIndex=-1)}),10)},clickGridItemCheckBox:function(e,t){this.indexList.includes(t)&&this.$refs.fileListTable.toggleRowSelection(e,!0)},clickGridAllCheckBox:function(){this.indexList.length!==this.fileList.length?this.$refs.checkboxGroup.toggleAll(!0):(this.$refs.checkboxGroup.toggleAll(),this.$refs.fileListTable.clearSelection())},gridItemClick:function(e,t){var i=t.path||t.composedPath&&t.composedPath(),n=i.findIndex((function(e){return"grid-item-checkbox van-checkbox"===e.className}));n>-1||(this.indexList.length<1?e.index!==this.editingIndex&&(this.fileClick(e),this.editingIndex=-1):this.indexList.includes(e.index)?this.$refs.fileListTable.toggleRowSelection(e,!1):this.$refs.fileListTable.toggleRowSelection(e,!0))},containerResize:function(){var e=document.querySelector(".dashboard-container").clientWidth;this.gridColumnNum=Math.round((e-10)/135),this.gridColumnWidth=(e-11*this.gridColumnNum)/this.gridColumnNum-4.5},formatTime:function(e){return Object(r["c"])(e)},formatSize:function(e){return Object(r["b"])(e)},goBack:function(){var e=this.pathList.length-3;this.handleLink(this.pathList[e],e)},handleLink:function(e,t){0===t&&(this.pathList.splice(this.pathList.findIndex((function(e,i){return i===t+1})),this.pathList.length-(t+1)),this.getFileList(null,!0),this.$router.push("/s?s=".concat(this.shareId,"&vmode=").concat(this.vmode))),e&&e.fileId&&(this.accessShareOpenDir(e.fileId),this.pathList.splice(this.pathList.findIndex((function(e,i){return i===t+1})),this.pathList.length-(t+1)))},changeVmode:function(){this.grid=!this.grid,this.vmode="list",this.grid&&(this.vmode="grid");this.$router.push("/s?s=".concat(this.shareId,"&vmode=").concat(this.vmode))},accessShareOpenDir:function(e){var t=this;this.tableLoading=!0,c["a"].accessShareOpenDir({share:this.shareId,fileId:e,pageIndex:this.pagination.pageIndex,pageSize:this.pagination.pageSize}).then((function(i){t.isLoading=!1,t.fileList=i.data,t.loadClientHeight(),t.listModeSearch=!0,t.pagination.fileId=e,t.pagination["total"]=i.count,t.$nextTick((function(){t.containerResize(),t.tableLoading=!1,t.linkFailed=!1}))})).catch((function(e){}))},getFileList:function(e,t){var i=this;this.tableLoading=!0,c["a"].accessShare({share:this.shareId,pageIndex:this.pagination.pageIndex,pageSize:this.pagination.pageSize}).then((function(n){if(i.isLoading=!1,Object.getPrototypeOf(n.data)===String.prototype)i.prompt="该链接已失效";else{if(i.fileList=n.data,i.fileList.map((function(e,t){e.index=t})),i.fileList.length>0&&c["a"].getSharer({userId:i.fileList[0].userId}).then((function(e){i.sharer=e.data})),i.loadClientHeight(),i.listModeSearch=!1,i.listModeSearchOpenDir=!1,i.pagination["total"]=n.count,i.$nextTick((function(){i.containerResize(),i.tableLoading=!1,i.linkFailed=!1})),!e){var s=i.fileList[0].path.split("/");i.currentDirName=s[s.length-2]}i.$nextTick((function(){if(i.containerResize(),i.tableLoading=!1,i.linkFailed=!1,!e){var n={};n["folder"]=i.currentDirName,n["index"]=i.pathList.length,t||i.pathList.push(n)}}))}})).catch((function(){i.tableLoading=!1,i.linkFailed=!0}))},currentChange:function(e){this.pagination.pageIndex=e,this.pagination.fileId?this.accessShareOpenDir(this.pagination.fileId):this.getFileList(!0)},getSummaries:function(e){var t=[];return t[2]=this.getShowSumFileAndFolder(this.fileList),this.summaries=t[2],t},getShowSumFileAndFolder:function(e){var t=0,i=0,n=0;e.forEach((function(e){e.isFolder?t+=1:i+=1,n+=e.size}));var s="";t>0&&(s=t+"个文件夹");var a="";return i>0&&(a=i+"个文件"),s+" "+a+this.getShowSumSize(n)},getShowSumSize:function(e){var t="";return e>0&&(t="  共"),t+=e<1024?e+"B":e>=1024&&e<1048576?(e/1024).toFixed(2)+"K":e>=1048576&&e<1073741824?(e/1048576).toFixed(2)+"M":(e/1073741824).toFixed(2)+"G",t},handleSelectionChange:function(e){var t=this;this.selectRowData=e;var i=0;this.indexList=[];var n,s=Object(a["a"])(e);try{for(s.s();!(n=s.n()).done;){var l=n.value;i+=l.size,this.indexList.push(l.index)}}catch(h){s.e(h)}finally{s.f()}e.forEach((function(e){t.$refs.fileListTable.toggleRowSelection(e,!0)}));var o=this.tableHead[2],r=this.tableHead[4],d=this.tableHead[5],c=this.tableHead[6];if(this.selectRowData.length>0){var u=this.getShowSumFileAndFolder(e),g=this.getShowSumSize(i);o.label=u,o.sortable=!1,r.name="more",d.label=g,d.sortable=!1,c.label="",c.sortable=!1,this.menusIsMultiple=!0,this.rowContextData=e[0]}else o.label="名称",o.sortable=!0,r.name="",d.label="大小",d.sortable=!0,c.label="修改日期",c.sortable=!0;this.indexList.length===this.fileList.length?this.allChecked=!0:this.allChecked=!1},rowRed:function(e){e.row,e.column;var t=e.rowIndex,i=e.columnIndex;if(this.indexList.length<1&&2===i&&this.cellMouseIndex===t)return{cursor:"pointer",color:"#19ACF9"};for(var n=0;n<this.indexList.length;n++)if(t===this.indexList[n])return{backgroundColor:"#baebff91",cursor:"default"}},tableRowClassName:function(e){var t=e.row,i=e.rowIndex;t.index=i},preliminaryRowData:function(e){e&&(this.rowContextData=e);this.rowContextData.isFavorite},cellMouseEnter:function(e){-1===this.editingIndex&&this.indexList.length<1&&(this.cellMouseIndex=e.index)},cellMouseLeave:function(){this.cellMouseIndex=-1},cellClick:function(e,t){if(clearTimeout(this.Loop),-1===this.editingIndex){var i=t.index;0===i&&this.$refs.fileListTable.toggleRowSelection(e),2===i&&this.indexList.length<1&&e.index!==this.editingIndex&&(this.fileClick(e),this.editingIndex=-1),this.indexList.length>0&&i>0&&this.$refs.fileListTable.toggleRowSelection(e)}},moreOperation:function(e){this.menusIsMultiple=!0,this.menus=this.multipleMenus,this.showOperationMenus(e)},moreClick:function(e,t){this.menusIsMultiple=!1,e.contentType&&e.contentType.includes("text")?this.menus=this.singleMenusEdit:this.menus=this.singleMenus,this.preliminaryRowData(e),this.showOperationMenus(t)},rowContextmenu:function(e){this.indexList.includes(e.index)?(this.menusIsMultiple=!0,this.menus=this.multipleRightMenus):(this.menusIsMultiple=!1,e.contentType&&e.contentType.includes("text")?this.menus=this.singleMenusEdit:this.menus=this.singleMenus,this.preliminaryRowData(e)),event.preventDefault(),this.menuTriangle="";var t={};t.pageX=event.pageX+5,t.pageY=event.pageY+2,t.clientX=event.clientX+5,t.clientY=event.clientY+2,this.$refs.contextShow.showMenu(event)},showOperationMenus:function(e){var t={};document.body.scrollHeight-e.pageY>400?(this.menuTriangle="menu-triangle-top",t.pageX=e.pageX-78,t.pageY=e.pageY+30,t.clientX=e.clientX+78,t.clientY=e.clientY+30):(this.menuTriangle="menu-triangle-bottom",t.pageX=e.pageX-78,t.pageY=e.pageY-350,t.clientX=e.clientX+78,t.clientY=e.clientY-350),this.isJustHideMenus||this.$refs.contextShow.showMenu(t)},show:function(){},hide:function(){var e=this;this.isJustHideMenus=!0,setTimeout((function(){e.isJustHideMenus=!1}),100)},menusOperations:function(e){switch(e){case"open":this.fileClick(this.rowContextData);break;case"download":this.downloadFile();break;case"copyDownloadUrl":this.downloadFile(!0);break}this.$refs.contextShow.hideMenu()},downloadFile:function(e){console.log("downloadFile",e);var t=0;if(this.indexList.length>0?this.selectRowData.forEach((function(e){t+=e.size})):t=this.rowContextData.size,t>0){var i=[];if(this.menusIsMultiple?this.selectRowData.forEach((function(e){i.push(e.id)})):i.push(this.rowContextData.id),i.length>1||this.rowContextData.isFolder)return void(e?this.copyDownloadLink(_["a"].publicPackageDownloadUrl(this.shareId,i)):_["a"].publicPackageDownload(this.shareId,i));e?this.copyDownloadLink(_["a"].publicDownloadUrl(this.shareId,this.rowContextData)):_["a"].publicDownload(this.shareId,this.rowContextData)}else this.$message({message:"所选文件为空",type:"warning"})},copyDownloadLink:function(e){var t=this,i=new S.a(".menu-option",{text:function(){return e}});i.on("success",(function(e){t.$message({message:"复制成功",type:"success",duration:1e3}),i.destroy()})),i.on("error",(function(e){t.$message({message:"该浏览器不支持自动复制",type:"warning",duration:1e3}),i.destroy()}))},fileClick:function(e){if(window.shareId=this.shareId,e.isFolder){var t={};t["folder"]=e.name,t["fileId"]=e.id,t["index"]=this.pathList.length,this.pathList.push(t),this.pagination.pageIndex=1,this.$router.push("/s?s=".concat(this.shareId,"&vmode=").concat(this.vmode)),this.accessShareOpenDir(e.id)}else{if(e.contentType.startsWith("image"))return this.imagePreviewVisible=!0,void(this.imagePreviewRow=e);if(x["c"].simText.includes(e.suffix))return this.textPreviewRow=e,void(this.textPreviewVisible=!0);if(e.contentType.indexOf("video")>-1)return this.videoPreviewVisible=!0,void(this.videoPreviewRow=e);if(e.contentType.indexOf("audio")>-1)return void d["a"].$emit("onAddAudio",e,this.audioCoverUrl);_["a"].publicPreview(e.id,this.shareId)}}}},F=D,M=(i("9859"),Object(p["a"])(F,n,s,!1,null,"62d28d1a",null));t["default"]=M.exports},"5d88":function(e,t,i){var n={"./Favoritestarrate.svg":"ba29","./add-file.svg":"cb53","./audio.svg":"5b8d","./back.svg":"c557","./breadcrumb-right.svg":"16b5","./cancel-share.svg":"5c1e","./close.svg":"7710","./contents.svg":"6e48","./dashboard.svg":"f782","./docment.svg":"29ad","./document.svg":"fd28","./example.svg":"30c3","./eye-open.svg":"d7ec","./eye.svg":"4df5","./file-Ds-store.svg":"c5e8","./file-add.svg":"6ab0","./file-bat.svg":"d3b9","./file-class.svg":"b7ab","./file-cmake.svg":"4fee","./file-conf.svg":"fa5a","./file-cpp.svg":"33e1","./file-css.svg":"270b","./file-dart.svg":"2f38","./file-db.svg":"d0a2","./file-dmg.svg":"a240","./file-excel.svg":"bd70","./file-exe.svg":"49f2","./file-factories.svg":"f3c5","./file-gitignore.svg":"47ff","./file-go.svg":"b909","./file-gradle.svg":"00d8","./file-gzip.svg":"bdb5","./file-h.svg":"5623","./file-html.svg":"e9ad","./file-idea.svg":"0ab8","./file-jar.svg":"fd7c","./file-java.svg":"2870","./file-js.svg":"6b09","./file-json.svg":"b7f1","./file-key.svg":"09e8","./file-log.svg":"1f55","./file-md.svg":"f421","./file-ncm.svg":"60c7","./file-pdf.svg":"63f3","./file-pem.svg":"2afe","./file-php.svg":"13a8","./file-pkg.svg":"f4b7","./file-plist.svg":"77a2","./file-properties.svg":"9339","./file-python.svg":"0c41","./file-shell.svg":"3f78","./file-swift.svg":"00b4","./file-tar.svg":"cf7d","./file-txt.svg":"374b","./file-upload.svg":"c9b7","./file-vue.svg":"2bc8","./file-word.svg":"5743","./file-xls.svg":"e6ed","./file-xml.svg":"e155","./file-xsl.svg":"7f33","./file-yml.svg":"3671","./file.svg":"b8b2","./folder-128.svg":"5911","./folder-add.svg":"2129","./folder-upload.svg":"c04d","./folder.svg":"d079","./form.svg":"eb1b","./fullscreen.svg":"9921","./gongxiangzhongxin.svg":"3886","./home.svg":"6bbe","./image.svg":"8736","./jmal-cloud.svg":"0340","./link.svg":"18f0","./loading-image-error.svg":"bd9b","./md-list.svg":"2edc","./md.svg":"304e","./menu-addtab.svg":"2c60","./menu-ascending.svg":"d129","./menu-copy.svg":"f613","./menu-descending.svg":"8e8c","./menu-deselect.svg":"3a0f","./menu-details.svg":"8ec2","./menu-download.svg":"8d45","./menu-edit1.svg":"ce0b","./menu-empty.svg":"3d2e","./menu-favorite-hover.svg":"aeb7","./menu-favorite.svg":"f17e","./menu-grid.svg":"4195","./menu-list.svg":"7f6d","./menu-null.svg":"8707","./menu-open.svg":"00bd","./menu-point.svg":"c784","./menu-remove.svg":"910d","./menu-rename.svg":"f1ae","./menu-select.svg":"cdac","./menu-unfavorite-hover.svg":"83bf","./menu-unfavorite.svg":"b554","./menu-unselect.svg":"21bd","./more.svg":"3dd0","./nested.svg":"dcf8","./normalscreen.svg":"7a3a","./open-folder.svg":"03fd","./password.svg":"2a3d","./release.svg":"7186","./search.svg":"8e8d","./share.svg":"5306","./tab-favorite.svg":"4a51","./tab-folder.svg":"93d7","./tab-recently.svg":"44b8","./tab-setting.svg":"46d6","./table.svg":"47f1","./tree.svg":"93cd","./user.svg":"b3b5","./video.svg":"8f2b","./warring.svg":"c1c0","./widget-email.svg":"5863","./widget-github.svg":"ca9d","./widget-music.svg":"2e4a","./widget-subscription.svg":"fba5","./zip.svg":"8aa6","./ziyuan.svg":"adc6","./zuijinyuedu.svg":"d565"};function s(e){var t=a(e);return i(t)}function a(e){var t=n[e];if(!(t+1)){var i=new Error("Cannot find module '"+e+"'");throw i.code="MODULE_NOT_FOUND",i}return t}s.keys=function(){return Object.keys(n)},s.resolve=a,e.exports=s,s.id="5d88"},6980:function(e,t,i){},9859:function(e,t,i){"use strict";i("d5e4")},cbbd:function(e,t,i){"use strict";i("6980")},d5e4:function(e,t,i){}}]);